<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Projeto - LABIC</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uW/r8Wl630WpD/jXgD0R8T2bB/pG/Pz4Jp5X5K5e5p5d5e5p5u5g5u5g5u5g5u5g5u5g5u5g5u5g5u5g5u5g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="assets/images/favicon.ico">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">

    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f8f9fa;
            color: #212529;
            transition: background-color 0.3s, color 0.3s;
        }

        .dark-mode-toggle-container .form-check-label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .dark-mode-toggle-container .form-check-label .fa-moon {
            display: none;
        }
        
        body.dark .dark-mode-toggle-container .form-check-label .fa-sun {
            display: none;
        }
        
        body.dark .dark-mode-toggle-container .form-check-label .fa-moon {
            display: inline;
        }

        body.dark {
            background-color: #1a202c;
            color: #f8f9fa;
        }
        
        body.dark .navbar {
            background-color: #2d3748 !important;
        }

        body.dark .navbar-toggler-icon {
            filter: invert(1);
        }

        body.dark .nav-link {
            color: rgba(255, 255, 255, 0.55) !important;
        }

        body.dark .nav-link.active {
            color: #fff !important;
        }
        
        body.dark .modal-content {
            background-color: #2d3748;
            color: #f8f9fa;
        }

        body.dark .modal-header {
            border-bottom-color: #4a5568;
        }

        body.dark .modal-footer {
            border-top-color: #4a5568;
        }

        body.dark .btn-close {
            filter: invert(1);
        }

        #model-container {
            width: 100%;
            height: 100%;
            min-height: 400px;
            position: relative;
            background-color: transparent;
            border-radius: 0.5rem;
            overflow: hidden;
        }
        
        #model-container canvas {
            width: 100% !important;
            height: 100% !important;
            border-radius: 0.5rem;
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 10;
        }
        
        body.dark .loading-overlay {
            background-color: rgba(45, 55, 72, 0.8);
        }
        
        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .error-message {
            color: #dc3545;
            font-weight: bold;
            text-align: center;
            padding: 1rem;
            display: none;
        }

        .spinner-border {
            width: 3rem;
            height: 3rem;
            border-width: .3em;
        }

        .content-section {
            margin-top: 3rem;
        }
    </style>
</head>
<body>

    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html">
                    <img src="assets/images/logo.png" alt="Ícone da Logo" height="40">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="projeto.html">O Projeto</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="referencial.html">Referencial</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="publicacoes.html">Publicações</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="blog.html">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="dados.html">Dados</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="glossario.html">Glossário</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="sobre.html">Sobre</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contato.html">Contato</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="login.html">Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cadastro.html">Cadastro</a>
                        </li>
                        <li class="nav-item dark-mode-toggle-container">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" id="darkModeToggle">
                                <label class="form-check-label" for="darkModeToggle">
                                    <i class="fas fa-sun"></i>
                                    <i class="fas fa-moon"></i>
                                </label>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <div class="container my-5">
            <section class="text-center" data-aos="fade-up">
                <h1 class="display-4 fw-bold">O Projeto</h1>
                <p class="lead">Conheça a Liga Acadêmica de Biologia e nossos projetos de pesquisa.</p>
            </section>
            
            <section class="content-section" data-aos="fade-up" data-aos-delay="200">
                <h2>Apresentação da Liga</h2>
                <p>A Liga Acadêmica de Biologia Imaculada Conceição é um grupo de pesquisa focado em temas de relevância científica e ambiental, com o objetivo de promover o conhecimento e a conscientização sobre questões biológicas complexas. Nossas investigações são conduzidas com rigor metodológico e visam contribuir para o entendimento de fenômenos ecológicos e a busca por soluções sustentáveis.</p>
            </section>
            
            <section class="content-section" data-aos="fade-up" data-aos-delay="300">
                <h2>Projetos de Pesquisa</h2>
                
                <div class="project-group mb-4">
                    <h3>3º Ano</h3>
                    <p><strong>Tema:</strong> Bioindicadores da Qualidade da Água em Áreas de Influência do Porto de Suape: Avaliação da Saúde de Ecossistemas Costeiros.</p>
                    <p><strong>Membros:</strong> Arthur Lemos, Marília Laura, Lyvia Beatriz, Taísa Paiva, Maria Letícia, Maria Eduarda e Pedro Martins.</p>
                    <button type="button" class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#projectModal">
                        Ver Protótipo 3D
                    </button>
                </div>
                
                <div class="project-group mb-4">
                    <h3>2º Ano A</h3>
                    <p><strong>Tema:</strong> Rotas Alteradas? Investigando a conexão entre o porto de Suape e a ocorrência de tubarões na região metropolitana do Recife.</p>
                    <p><strong>Membros:</strong> Maria Eduarda Gaspar, Mayra, Maria Clara, Ana Beatriz do Canto, Yasmin Melo, Julia Beatriz e Julie Azevedo.</p>
                </div>

                <div class="project-group mb-4">
                    <h3>2º Ano B</h3>
                    <p><strong>Tema:</strong> Análise dos Impactos do saneamento básico na saúde na ilha de Tatuoquinha, Porto de Suape.</p>
                    <p><strong>Membros:</strong> Giovana Silveira, Júlia Silveira, Eutália Duarte, Fernando José, Adélia Amorim, Pedro Miguel e Maria Vitória Galamba.</p>
                </div>
                
                <div class="project-group mb-4">
                    <h3>1º Ano</h3>
                    <p><strong>Tema:</strong> Biofiltração inteligente: avaliação da eficiência de diferentes espécies de macroalgas na remediação de Efluentes encontradas em áreas portuárias de suape.</p>
                    <p><strong>Membros:</strong> Flora Nascimento, Gabriele Machado, Gabrielly Marinho, Alícia Vitória, Heitor e Bruno.</p>
                </div>
            </section>
            
            <section class="content-section" data-aos="fade-up" data-aos-delay="500">
                <h2>Orientador</h2>
                <p>Todos os projetos são orientados pelo Prof. Vanbasten Rocha.</p>
            </section>
            
        </div>
    </main>

    <div class="modal fade" id="projectModal" tabindex="-1" aria-labelledby="projectModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="projectModalLabel">Protótipo de Monitoramento de Água Inteligente</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row modal-body-3d">
                        <div class="col-md-7">
                            <div id="model-container">
                                <div id="loading-overlay" class="loading-overlay">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <div class="loading-text">Carregando modelo 3D... 0%</div>
                                </div>
                                <div id="error-message" class="error-message"></div>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <p>Um Protótipo de Monitoramento de Água Inteligente 3D que nós criamos. Esse protótipo tem como material um Arduino que controla os sensores de ph, a turbidez, a temperatura da água. Usamos um protoboard de 830 pontose na programação usamos as bibliotecas de C++ LiquidCrystal_I2C, OneWire e DallasTemperature para conduzir o Arduino a calibrar os materiais necessários.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container text-center">
            <p>&copy; 2025 Liga Acadêmica de Biologia Imaculada Conceição | Todos os direitos reservados.</p>
            <p>Orientação: Prof. Vanbasten Rocha</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="js/main.js" defer></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            AOS.init();
        });

        // Script para o modo escuro
        document.addEventListener('DOMContentLoaded', () => {
            const darkModeToggle = document.getElementById('darkModeToggle');
            const body = document.body;

            // Define o modo com base no localStorage ao carregar a página
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            if (isDarkMode) {
                body.classList.add('dark');
                darkModeToggle.checked = true;
            }

            darkModeToggle.addEventListener('change', () => {
                if (darkModeToggle.checked) {
                    body.classList.add('dark');
                    localStorage.setItem('darkMode', 'true');
                } else {
                    body.classList.remove('dark');
                    localStorage.setItem('darkMode', 'false');
                }
            });
        });
    </script>
    
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.158.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.158.0/examples/jsm/"
            }
        }
    </script>
    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { RGBELoader } from 'three/addons/loaders/RGBELoader.js';

        // Escutador para o evento de exibição do modal
        const projectModal = document.getElementById('projectModal');
        projectModal.addEventListener('shown.bs.modal', () => {
            initModel();
        });

        const container = document.getElementById('model-container');
        const loadingOverlay = document.querySelector('.loading-overlay');
        const errorMessage = document.getElementById('error-message');

        let renderer, scene, camera, controls, model;
        let isUserInteracting = false;

        function showLoading() {
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
            if (errorMessage) {
                errorMessage.style.display = 'none';
            }
        }

        function hideLoading() {
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        function showError(message) {
            if (errorMessage) {
                errorMessage.textContent = message;
                errorMessage.style.display = 'block';
            }
            hideLoading();
        }

        function initModel() {
            if (!container) {
                console.error('Container for the 3D model not found.');
                showError('O contêiner para o modelo 3D não foi encontrado.');
                return;
            }

            // Evita a reinicialização se o modelo já estiver carregado
            if (renderer) {
                renderer.setSize(container.clientWidth, container.clientHeight);
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                return;
            }

            showLoading();

            // Scene
            scene = new THREE.Scene();
            scene.background = null;

            // Camera
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(0, 1, 3);

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setClearColor(0x000000, 0); // Fundo transparente
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1;
            renderer.outputEncoding = THREE.sRGBEncoding;
            container.appendChild(renderer.domElement);

            // Lighting & Environment
            const pmremGenerator = new THREE.PMREMGenerator(renderer);
            pmremGenerator.compileEquirectangularShader();

            new RGBELoader()
                .setDataType(THREE.FloatType)
                .setPath('../assets/3d/')
                .load('empty_play_room_4k.hdr', (texture) => {
                    const envMap = pmremGenerator.fromEquirectangular(texture).texture;
                    scene.environment = envMap;
                    texture.dispose();
                    pmremGenerator.dispose();
                }, undefined, (error) => {
                    console.error('An error happened while loading the environment map:', error);
                });

            // GLTF Loader (3D Model)
            const loader = new GLTFLoader();
            loader.load(
                '../assets/3d/smart_water.glb',
                (gltf) => {
                    model = gltf.scene;
                    scene.add(model);
                    hideLoading();
                },
                (xhr) => {
                    if (xhr.lengthComputable) {
                        const percentComplete = xhr.loaded / xhr.total * 100;
                        const loadingText = loadingOverlay.querySelector('.loading-text');
                        if (loadingText) {
                            loadingText.textContent = `Carregando modelo 3D... ${Math.round(percentComplete)}%`;
                        }
                    }
                },
                (error) => {
                    console.error('An error happened while loading the model:', error);
                    showError('Falha ao carregar o modelo 3D. Tente novamente mais tarde.');
                }
            );

            // Orbit Controls
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false;
            controls.maxPolarAngle = Math.PI / 2;

            controls.addEventListener('start', () => { isUserInteracting = true; });
            controls.addEventListener('end', () => { isUserInteracting = false; });

            // Animation Loop
            function animate() {
                requestAnimationFrame(animate);
                controls.update();

                if (model && !isUserInteracting) {
                    model.rotation.y += 0.005;
                }
                renderer.render(scene, camera);
            }
            animate();

            // Responsive Resize
            window.addEventListener('resize', onWindowResize);
        }

        function onWindowResize() {
            if (renderer) {
                const newWidth = container.clientWidth;
                const newHeight = container.clientHeight;
                camera.aspect = newWidth / newHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(newWidth, newHeight);
            }
        }
    </script>
</body>
</html>